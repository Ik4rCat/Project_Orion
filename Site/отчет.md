# Подробное описание проекта Project Orion

## Общая архитектура и технологии

Проект "Project Orion" представляет собой веб-приложение, разработанное с использованием современного стека технологий .NET. В настоящее время идет работа над созданием версии для игровых разработчиков, которая будет включать функциональность, специфичную для управления процессом разработки игр.

### Основные технологии:

1. **ASP.NET Core** - современный кросс-платформенный фреймворк для создания веб-приложений
2. **C#** - основной язык программирования
3. **Entity Framework Core** - ORM для работы с базой данных SQL Server
4. **Microsoft Identity** - система для управления пользователями, ролями и аутентификацией
5. **MVC (Model-View-Controller)** - архитектурный паттерн для организации кода
6. **SQL Server** - СУБД для хранения данных

### Структура проекта:

Проект разделен на несколько взаимосвязанных компонентов, что соответствует принципам чистой архитектуры:

1. **Orion.Core** - ядро системы, содержащее модели, интерфейсы и перечисления
2. **Orion.Infrastructure** - инфраструктурный слой с репозиториями и доступом к данным
3. **Orion.Web** - слой представления, содержащий контроллеры, представления и модели представления

## Подробный обзор компонентов

### Orion.Core

Этот проект содержит основные модели данных и бизнес-логику. Недавно были добавлены модели для поддержки функциональности разработки игр:

#### Основные модели:

1. **GameProject** - модель для хранения информации об игровом проекте:
   - Основные свойства (название, описание, URL изображения)
   - Жанр, целевые платформы, игровой движок
   - Стадия разработки, даты начала и предполагаемого релиза
   - Бюджет, расходы, прогресс разработки
   - Связи с командами, спринтами, задачами, баг-репортами и т.д.

2. **BugReport** - система для отслеживания ошибок:
   - Информация о баге (заголовок, описание, шаги воспроизведения)
   - Информация о серьезности и приоритете
   - Связь с проектом, версией
   - Отслеживание статуса исправления
   - История комментариев

3. **SprintInfo** - информация о спринтах в Agile-методологии:
   - Название, описание, даты начала и окончания
   - Связанные задачи и баги
   - Метрики производительности (запланированная и фактическая скорость)
   - Ретроспектива и аналитика

4. **DevelopmentTeam** - модель для команд разработчиков:
   - Основная информация (название, описание, аватар)
   - Состав команды с ролями
   - Производительность и метрики
   - Связь с проектами и задачами

5. **GameAsset** - система управления игровыми ресурсами:
   - Название, описание, тип
   - Предпросмотр и ссылки для скачивания
   - Управление версиями
   - Метаданные и зависимости

6. **BuildInfo** - информация о сборках игры:
   - Номер и версия сборки
   - Информация о запуске и завершении сборки
   - Результаты тестов
   - Примечания к выпуску

7. **VersionControlCommit** - интеграция с системами контроля версий:
   - Информация о коммитах
   - Связанные задачи и исправленные баги
   - Метрики кода

8. **EngineIntegration** - интеграция с игровыми движками:
   - Настройки API и синхронизации
   - Плагины и шаблоны проектов
   - Журнал событий

#### Перечисления (Enums):

В файле `Orion.Core/Enums/GameEnums.cs` определены различные перечисления для категоризации данных:
- **GameGenre** - жанры игр (Action, RPG, Strategy и т.д.)
- **GamePlatform** - целевые платформы (Windows, Android, PlayStation и т.д.)
- **GameEngine** - игровые движки (Unity, UnrealEngine, Godot и т.д.)
- **DevelopmentStage** - стадии разработки (Concept, Alpha, Beta и т.д.)
- **ProjectStatus** - статусы проекта (InProgress, Completed и т.д.)
- **DeveloperRole** - роли разработчиков (Programmer, Artist, Designer и т.д.)
- **AssetType** - типы игровых ресурсов (Model3D, Texture, Sound и т.д.)
- **BuildStatus** - статусы сборки (InProgress, Success, Failed и т.д.)
- **CommitType** - типы коммитов (Feature, Bugfix, Hotfix и т.д.)

### Orion.Infrastructure

Этот слой отвечает за доступ к данным и взаимодействие с базой данных:

#### Repositories:

1. **Repository<T>** - базовый репозиторий с основными операциями CRUD:
   - GetAllAsync() - получить все сущности
   - FindAsync() - найти сущности по условию
   - GetByIdAsync() - получить сущность по идентификатору
   - AddAsync() - добавить сущность
   - UpdateAsync() - обновить сущность
   - DeleteAsync() - удалить сущность
   - SaveChangesAsync() - сохранить изменения

2. Специализированные репозитории:
   - **NoteRepository**
   - **UserRepository**
   - **GroupRepository**
   - **UserGroupRepository**

#### ApplicationDbContext:

Контекст базы данных, использующий Entity Framework Core для маппинга между объектами и таблицами.

### Orion.Web

Веб-проект, содержащий пользовательский интерфейс и логику контроллеров:

#### Models:

1. **Dashboard/DashboardViewModel** - модель представления для стандартной панели управления:
   - Списки задач, заметок и групп
   - Счетчики задач (завершенные, незавершенные, просроченные)
   - Информация о текущем пользователе

2. **Dashboard/DeveloperDashboardViewModel** - новая модель для панели разработчика игровой студии:
   - Игровые проекты
   - Задачи по ролям
   - Баги по приоритетам
   - Игровые ресурсы
   - Информация о спринтах
   - Информация о командах
   - Аналитика разработки
   - Коммиты и сборки

#### Controllers:

Контроллеры для обработки запросов пользователей:
- HomeController
- AccountController
- GroupController (с методами для создания и удаления групп)
- DashboardController

#### Views:

Представления для отображения пользовательского интерфейса:
- Главная страница
- Страницы для управления группами
- Страницы для управления профилем
- Панель управления

## Запуск и развертывание

Приложение настроено через `Program.cs`, где регистрируются сервисы:
- Настройка контроллеров и представлений
- Подключение к базе данных (SQL Server)
- Настройка Identity для управления пользователями
- Регистрация репозиториев
- Настройка HTTP pipeline

При первом запуске автоматически создается администратор с предопределенными учетными данными.

## Текущие разработки

В настоящее время активно разрабатывается версия для игровых разработчиков, которая включает:

1. **Управление проектами игр**:
   - Отслеживание прогресса разработки
   - Управление ресурсами
   - Интеграция с игровыми движками

2. **Agile-методология**:
   - Планирование спринтов
   - Отслеживание задач
   - Метрики производительности команды

3. **Система багов**:
   - Подробное описание ошибок
   - Отслеживание статуса исправления
   - Интеграция с системой контроля версий

4. **Управление командой**:
   - Распределение ролей
   - Анализ производительности
   - Коммуникация внутри команды

5. **Управление ресурсами**:
   - Хранение и версионирование игровых ассетов
   - Зависимости между ресурсами
   - Метаданные и категоризация

6. **Интеграция с игровыми движками**:
   - Автоматизация процессов разработки
   - Управление плагинами
   - Синхронизация проектов

7. **Контроль версий и сборки**:
   - Отслеживание коммитов
   - Управление сборками
   - Интеграция с CI/CD инструментами

## Особенности работы с проектом

Из анализа командной строки видно, что при разработке могут возникать следующие проблемы:

1. **Блокировка файлов процессом**: Ошибка "The process cannot access the file because it is being used by another process" часто возникает при попытке перекомпилировать приложение, когда предыдущий экземпляр все еще запущен. Для устранения необходимо:
   - Остановить все запущенные экземпляры приложения перед перекомпиляцией
   - Использовать команду `taskkill /F /IM Orion.Web.exe` для принудительной остановки

2. **Запуск проекта**: Для правильного запуска проекта необходимо:
   - Использовать команду `dotnet run --project Orion.Web` из директории Site
   - Либо перейти в директорию Orion.Web и использовать `dotnet run`

3. **SQL-запросы**: Из логов видно, что приложение активно взаимодействует с базой данных, выполняя запросы для:
   - Получения данных пользователя
   - Получения задач, созданных пользователем или назначенных ему
   - Получения заметок пользователя
   - Получения групп, в которых состоит пользователь

Приложение разработано с учетом современных практик и следует принципам чистой архитектуры, что делает его гибким для расширения и поддержки. 